# CALL THIS TO COPY THE ERRMSG FILE TO THE CORRECT
# LOCATION
# THIS WILL ONLY WORK IF MYSQL WAS FOUND


SET (MYSQL_ERRSQL_FROM_PATH "")
SET (MYSQL_ERRSQL_TO_PATH "")

IF (MYSQL_INCLUDE_DIR)
  # Already in cache, be silent
  MESSAGE ("MYSQL Include dir defined : ${MYSQL_INCLUDE_DIR}")

  

IF (APPLE)
	# EMBEDD ERRMSG.SYS
	make_directory ("${PROJECT_BINARY_DIR}/${CMAKE_BUILD_TYPE}/${PROGNAME}.app/Contents/mysql/")
	SET (MYSQL_ERRSQL_FROM_PATH "${MYSQL_INCLUDE_DIR}../share/english")
	SET (MYSQL_ERRSQL_TO_PATH "${PROJECT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/${PROGNAME}.app/Contents/mysql")
	
	
ELSE (APPLE)
	IF (WIN32)
	# COPY ERRMSG.SYS
	SET (MYSQL_ERRSQL_TO_PATH "${PROJECT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/mysql")
	ADD_CUSTOM_COMMAND (
		TARGET ${PROGNAME}
		PRE_BUILD
    	COMMAND ${CMAKE_COMMAND}
    	-E make_directory MYSQL_ERRSQL_TO_PATH)
		
	SET (MYSQL_ERRSQL_FROM_PATH "${MYSQL_INCLUDE_DIR}../share/english")
	MESSAGE (${MYSQL_ERRSQL_TO_PATH})
	ENDIF (WIN32)

	# LINUX 
	# don't copy anything!
	#make_directory ("${PROJECT_BINARY_DIR}/mysql/")
	#SET (MYSQL_ERRSQL_FROM_PATH "${MYSQL_INCLUDE_DIR}../share/mysql/english")
	#SET (MYSQL_ERRSQL_TO_PATH "${PROJECT_BINARY_DIR}/mysql")
ENDIF (APPLE)


IF (APPLE OR WIN32)
ADD_CUSTOM_COMMAND (
	TARGET ${PROGNAME}
	POST_BUILD
    COMMAND ${CMAKE_COMMAND}
    -E copy ${MYSQL_ERRSQL_FROM_PATH}/errmsg.sys  
	${MYSQL_ERRSQL_TO_PATH}/errmsg.sys)
ENDIF (APPLE OR WIN32)

	
ENDIF (MYSQL_INCLUDE_DIR)

  


  
  
